<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Device Usage Setup</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        :root {
            --primary-dark: #1a1a2e;
            --secondary-dark: #16213e;
            --accent: #0f3460;
            --highlight: #e94560;
        }
        body {
            background: linear-gradient(135deg, var(--primary-dark) 0%, var(--secondary-dark) 100%);
            min-height: 100vh;
            color: #fff;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            font-size: larger;
            flex: auto;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .card {
            background-color: white;
            border-radius: 12px;
            width: 40vw;
            height: auto;
        }
        .btn-primary {
            background-color: var(--highlight);
            border: none;
        }
        .btn-primary:hover {
            background-color: #d63447;
        }
        ol li{
            color: brown;
        }

    </style>
</head>
<body>
<div class="container" style="max-width: 600px;">
    <div class="card p-4 shadow-lg">
        {% if step == "form" %}
            <h3 class="mb-3">Set up your device usage</h3>
            <p class="text-muted">Enter your username to generate a personalized tracking script.</p>
            {% if error %}
                <div class="alert alert-danger py-2">{{ error }}</div>
            {% endif %}
            <form method="post">
                <div class="mb-3">
                    <label class="form-label">Username</label>
                    <input name="username"
                           class="form-control"
                           value="{{ username }}"
                           placeholder="e.g. user001"
                           required>
                </div>
                <button class="btn btn-danger w-100" type="submit">Next</button>
            </form>
        {% elif step == "instructions" %}
            <h3 class="mb-3">Almost done, {{ username }}</h3>
            <p class="text-muted">Please follow these directions before using the device:</p>
            <ol class="mb-3">
                <li>Download the setup script below.</li>
                <li>Run it once as Administrator on your device.</li>
                <li>Keep the laptop connected to the internet for logs to reach the server.</li>
                <li>Do not rename or edit the script after download.</li>
            </ol>
            <a class="btn btn-success w-100"
               href="{{ url_for('download_bat', username=username) }}">
                Download setup script (.bat)
            </a>
            <p class="small text-muted mt-3">
                This script will collect only system resource metadata (CPU, RAM, storage, GPS) and send it securely to the admin server.
            </p>
        {% endif %}
    </div>
</div>
</body>
</html>
